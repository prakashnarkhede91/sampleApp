(this["webpackJsonpbots.container"]=this["webpackJsonpbots.container"]||[]).push([[0],{1435:function(e,t){},1440:function(e,t){},1459:function(e,t){},1461:function(e,t){},1462:function(e,t){},1463:function(e,t){},1464:function(e,t){},1465:function(e,t){},1466:function(e,t){},1467:function(e,t){},1638:function(e,t,n){},1639:function(e,t,n){},2577:function(e,t){},2694:function(e,t){},2715:function(e,t){},2717:function(e,t){},2720:function(e,t){},2721:function(e,t){},2722:function(e,t){},2723:function(e,t){},2724:function(e,t){},2728:function(e,t){},2924:function(e,t){},294:function(e,t){},2943:function(e,t,n){"use strict";n.r(t);n(583),n(595),n(596),n(597),n(598),n(599),n(600),n(601),n(602),n(603),n(604),n(605),n(606),n(607),n(608),n(844),n(846),n(847),n(848),n(849),n(850),n(852),n(612),n(855),n(856),n(371),n(859),n(861),n(862),n(863),n(864),n(865),n(866),n(869),n(870),n(871),n(872),n(873),n(874),n(618),n(436),n(876),n(878),n(879),n(880),n(881),n(882),n(883),n(884),n(886),n(887),n(888),n(889),n(890),n(891),n(892),n(621),n(893),n(894),n(895),n(896),n(897),n(898),n(899),n(900),n(902),n(903),n(905),n(906),n(907),n(908),n(909),n(911),n(912),n(913),n(914),n(915),n(916),n(917),n(918),n(919),n(920),n(921),n(922),n(923),n(924),n(925),n(624),n(926),n(927),n(928),n(929),n(936),n(937),n(938),n(939),n(940),n(941),n(943),n(944),n(945),n(946),n(947),n(948),n(949),n(950),n(951),n(627),n(954),n(955),n(956),n(957),n(958),n(959),n(960),n(448),n(961),n(962),n(966),n(967),n(968),n(969),n(971),n(972),n(973),n(974),n(975),n(977),n(979),n(984),n(985),n(986),n(987),n(988),n(989),n(990),n(991),n(992),n(993),n(994),n(995),n(996),n(997),n(998),n(999),n(1e3),n(1001),n(1002),n(1003),n(1004),n(1005),n(1006),n(1007),n(1008),n(1009),n(1010),n(1011),n(1012),n(1013),n(1014),n(1015),n(451),n(1017),n(1527),n(1534),n(1535),n(1536),n(1537),n(1538),n(1540),n(1541),n(1542),n(1543),n(1544),n(1545),n(1546),n(1547),n(1549),n(1550),n(1551),n(1552),n(1553),n(1554),n(1555),n(1556),n(1557),n(1558),n(1559),n(1560),n(1561),n(1562),n(1563),n(1564),n(1565),n(1566),n(1567),n(1568),n(1570),n(1571),n(1572),n(1573),n(1577),n(1579),n(1581),n(1582),n(1583),n(1584),n(1585),n(1587),n(1588),n(1589),n(1590),n(1591),n(1592),n(1593),n(1594),n(1595),n(1596),n(1597),n(1598),n(1599),n(1600),n(1601),n(1602),n(1603),n(1604),n(1605),n(1606),n(1607),n(1608),n(1609),n(1610),n(1611),n(1612),n(1614),n(1021),n(1022),n(1023),n(1616),n(1617),n(1618),n(1619),n(1620),n(1621),n(1622),n(1024),n(634),n(1027),n(1028),n(1029),n(1032),n(1033),n(1628),n(1633);var c=n(0),a=n.n(c),i=n(93),o=n.n(i),r=(n(1638),n(1639),n(819)),s=n(88),u=n(176),b=n(345),d=n(1473),l=n(137),j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SNACKBAR_NOTIFICATION":return Object(l.a)(Object(l.a)({},e),{},{notificationsSnackbarOpen:!0,notificationsSnackbarMessage:t.message});case"SNACKBAR_CLEAR":return Object(l.a)(Object(l.a)({},e),{},{notificationsSnackbarOpen:!1});default:return e}},f=n(3),O=n(565),h=n(201),p=n(425),g=n.n(p),v=n(2967),x=n(1471),m=(n(2934),n(2969)),y=function(e){return function(t){t({type:"SNACKBAR_NOTIFICATION",message:e})}},C=n(24),S=function(e){var t=e.botId,n=e.activityId,a=e.children,i=Object(u.useDispatch)(),o=Object(c.useReducer)((function(e,t){return Object(l.a)(Object(l.a)({},e),t)}),{feedbackState:"waiting",message:"",isOpened:!1}),r=Object(h.a)(o,2),s=r[0],b=r[1],d=function(e){b({feedbackState:"processing"}),b({isOpened:!1}),j(e).then((function(e){e?b({feedbackState:"completed"}):(i(y("Something's gone wrong...")),b({feedbackState:"waiting"}))}))},j=function(){var e=Object(O.a)(Object(f.a)().mark((function e(c){var a,i,o,r;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat("http://bots.staging.abgza.co.za/ABBE.API/v1/","v1/feedback/"),i={botId:t,messageId:n,isPositive:c,message:s.message},e.next=4,fetch(a,{method:"POST",headers:{"Content-Type":"application/json",apiKey:'"Z%9Mkh710z-N+R.,82[LjbrIDast"'},body:JSON.stringify(i)});case 4:return o=e.sent,e.next=7,o.json();case 7:return r=e.sent,e.abrupt("return",r.success);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(e){b({message:e.target.value})},g=function(e){return s.feedbackState!==e};return Object(C.jsxs)("div",{className:"botActivityDecorator",children:[Object(C.jsxs)("ul",{hidden:g("waiting"),className:"botActivityDecorator__buttonBar",children:[Object(C.jsx)("li",{children:Object(C.jsx)(m.a,{className:"botActivityDecorator__button",onClick:function(){d(!0)},children:Object(C.jsx)(v.a,{style:{fontSize:16},children:"thumb_up"})})}),Object(C.jsx)("li",{children:Object(C.jsx)(m.a,{className:"botActivityDecorator__button",onClick:function(){b({isOpened:!0})},children:Object(C.jsx)(v.a,{style:{fontSize:16},children:"thumb_down"})})})]}),Object(C.jsx)("ul",{hidden:g("processing"),className:"botActivityDecorator__buttonBar",children:Object(C.jsx)("li",{children:Object(C.jsx)(v.a,{style:{fontSize:16,marginTop:15,marginLeft:5},children:"hourglass_full"})})}),Object(C.jsx)("ul",{hidden:g("completed"),className:"botActivityDecorator__buttonBar",children:Object(C.jsx)("li",{children:Object(C.jsx)(v.a,{style:{fontSize:16,marginTop:15,marginLeft:5},children:"done_all"})})}),Object(C.jsx)("div",{className:"botActivityDecorator__content",children:a}),Object(C.jsx)(x.a,{open:s.isOpened,contentStyle:{width:"250px",height:"150px"},modal:!0,children:function(){return Object(C.jsxs)("div",{className:"feedbackModal",children:[Object(C.jsx)("div",{children:"Please provide feedback to help us improve ABBE:"}),Object(C.jsx)("div",{children:Object(C.jsx)("textarea",{onChange:p})}),Object(C.jsx)("button",{onClick:function(){d(!1)},children:"Submit"}),Object(C.jsx)("button",{onClick:function(){b({isOpened:!1})},children:"Close"})]})}})]})},N=n(2968);function k(){var e=Object(u.useDispatch)(),t=Object(u.useSelector)((function(e){return e})),n=t.notificationsSnackbarMessage,c=t.notificationsSnackbarOpen;function a(){e((function(e){e({type:"SNACKBAR_CLEAR"})}))}return Object(C.jsx)(N.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:c,onClose:a,"aria-describedby":"client-snackbar",message:Object(C.jsx)("span",{id:"client-snackbar",children:n}),action:[Object(C.jsx)(m.a,{"aria-label":"close",color:"inherit",onClick:a,children:Object(C.jsx)(v.a,{children:"close"})},"close")]})}var B=function(){var e=Object(u.useDispatch)(),t=Object(s.f)(),n=t.botId,i=t.systemName,o=a.a.useState(),r=Object(h.a)(o,2),b=r[0],d=r[1],l=a.a.useState(!1),j=Object(h.a)(l,2),x=j[0],m=j[1],N=a.a.useState(""),B=Object(h.a)(N,2),A=B[0],I=B[1],_=Object(p.createStyleSet)({bubbleBackground:"#ff000044",bubbleFromUserBackground:"#0000ff44",sendBoxButtonColor:"#D6002A",sendBoxButtonColorOnFocus:"#D6002A",sendBoxButtonColorOnHover:"#0078d7",sendBoxBackground:"#ddd"});Object(c.useEffect)(Object(O.a)(Object(f.a)().mark((function t(){var c,a,o;return Object(f.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(b){t.next=9;break}return c="".concat("http://bots.staging.abgza.co.za/ABBE.API/v1/","settings/ui/").concat(null!==n&&void 0!==n?n:"","/").concat(null!==i&&void 0!==i?i:""),t.next=4,fetch(c,{method:"GET",headers:{"Content-Type":"application/json",apiKey:"Z%9Mkh710z-N+R.,82[LjbrIDast"},credentials:"include"});case 4:return a=t.sent,t.next=7,a.json();case 7:(o=t.sent).success?(I(o.data.username),d(Object(p.createDirectLine)({token:o.data.botToken}))):(e(y("Something's gone wrong... [".concat(o.errorMessage,"]"))),m(!0));case 9:case"end":return t.stop()}}),t)}))));var D=Object(p.createStore)({},(function(e){var t=e.dispatch;return function(e){return function(n){return"DIRECT_LINE/CONNECT_FULFILLED"===n.type&&t({type:"WEB_CHAT/SEND_EVENT",payload:{name:"requestWelcomeDialog",value:{language:window.navigator.language}}}),e(n)}}}));return b?Object(C.jsxs)("div",{className:"botContainer",children:[Object(C.jsx)("div",{className:"botHeader",children:"Chat Winjit Test"}),Object(C.jsx)(g.a,{activityMiddleware:function(){return function(e){return function(){for(var t=arguments.length,c=new Array(t),a=0;a<t;a++)c[a]=arguments[a];var i=c[0];return"bot"===i.activity.from.role&&"message"===i.activity.type?function(){return Object(C.jsx)(S,{botId:n,activityId:i.activity.id,children:e.apply(void 0,c).apply(void 0,arguments)},i.activity.id)}:e.apply(void 0,c)}}},store:D,directLine:b,styleSet:_,username:A}),Object(C.jsx)(k,{})]}):!0===x?Object(C.jsxs)("div",{className:"botContainer",children:[Object(C.jsx)("div",{className:"botHeader",children:"Chat"}),Object(C.jsx)(v.a,{className:"errorIcon",style:{fontSize:40},children:"error"})]}):Object(C.jsxs)("div",{className:"botContainer",children:[Object(C.jsx)("div",{className:"botHeader",children:"Chat"}),Object(C.jsx)("img",{src:"loading.gif"})]})},A=function(){var e=Object(b.createStore)(j,Object(b.applyMiddleware)(d.a));return console.log("process.env.PUBLIC_URL===","","/container"),Object(C.jsx)(u.Provider,{store:e,children:Object(C.jsxs)(r.a,{basename:"".concat("","/"),children:[Object(C.jsx)(s.b,{path:"/",exact:!0,component:B,children:Object(C.jsx)(s.a,{to:"".concat("/container","/abbe-3A82323C8847F6C0CDB601D6F18B00EB")})}),Object(C.jsx)(s.b,{path:"".concat("/container","/:botId"),exact:!0,component:B}),Object(C.jsx)(s.b,{path:"".concat("/container","/:botId/:systemName"),exact:!0,component:B})]})})},I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,2971)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),c(e),a(e),i(e),o(e)}))};o.a.render(Object(C.jsx)(a.a.StrictMode,{children:Object(C.jsx)(A,{})}),document.getElementById("root")),I()},358:function(e,t){},790:function(e,t){},791:function(e,t){}},[[2943,1,2]]]);
//# sourceMappingURL=main.1d34082a.chunk.js.map